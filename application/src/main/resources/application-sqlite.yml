# Configurazione profilo sqlite - SQLite + tabella export locale
spring:
  # Configurazione database SQLite
  datasource:
    url: "${SQLITE_DATABASE_URL:jdbc:sqlite:./data/gestione_annotazioni.db}"
    driver-class-name: org.sqlite.JDBC
    # SQLite non supporta username/password
  
  # Configurazione JPA per SQLite
  jpa:
    database-platform: org.hibernate.community.dialect.SQLiteDialect
    hibernate:
      ddl-auto: update
    defer-datasource-initialization: true
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.community.dialect.SQLiteDialect
        '[format_sql]': true
        '[physical_naming_strategy]': it.alnao.springbootexample.core.config.CustomPhysicalNamingStrategy
        jdbc:
          '[time_zone]': UTC
    packages-to-scan:
      - it.alnao.springbootexample.sqlite.entity
      - it.alnao.springbootexample.sqlite.entity.auth

  # Disabilita MongoDB per il profilo sqlite e disabilita azure per profilo sqlite
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration
      - org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration
      - org.springframework.boot.autoconfigure.cosmos.CosmosAutoConfiguration
      - com.azure.spring.cloud.autoconfigure.implementation.cosmos.AzureCosmosAutoConfiguration
      - com.azure.spring.cloud.autoconfigure.implementation.context.AzureContextAutoConfiguration
      - com.azure.spring.cloud.autoconfigure.implementation.context.AzureTokenCredentialAutoConfiguration
      - com.azure.spring.cloud.autoconfigure.implementation.kafka.AzureEventHubsKafkaOAuth2AutoConfiguration
      - com.azure.spring.cloud.autoconfigure.implementation.AzureGlobalPropertiesAutoConfiguration
      - com.azure.spring.cloud.autoconfigure.implementation.storage.AzureStorageBlobAutoConfiguration
      - com.azure.spring.cloud.autoconfigure.implementation.storage.AzureStorageQueueAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration
      - org.redisson.spring.starter.RedissonAutoConfiguration
      - org.springframework.boot.actuate.autoconfigure.data.redis.RedisHealthContributorAutoConfiguration
      - org.springframework.boot.actuate.autoconfigure.data.redis.RedisReactiveHealthContributorAutoConfiguration
  # Inizializzazione SQL
  sql:
    init:
      mode: always



# Logging specifico per SQLite
logging:
  level:
    '[it.alnao.springbootexample]': DEBUG
    '[org.springframework.web]': DEBUG
    '[org.hibernate.SQL]': DEBUG

# Configurazione utenti di default per SQLite
app:
  init:
    users:
      enabled: ${APP_CREATE_USERS_ENABLED:true}
      default-users:
        - username: admin
          email: admin@example.com
          password: admin
          role: ADMIN
        - username: moderatore
          email: moderatore@example.com
          password: cattivo
          role: MODERATOR
        - username: alnao
          email: alnao@example.com
          password: bellissimo
          role: USER

# Configurazione export annotazioni via tabella locale
gestione-annotazioni:
  export-annotazioni:
    sqlite:
      table-name: "annotazioni_inviate"
    #enabled: true
    #cron-expression: "0 */5 * * * *"   # ogni 5 minuti